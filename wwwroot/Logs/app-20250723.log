2025-07-23 07:33:51.572 +07:00 [INF] Đã áp dụng migrations cho AppDbContext.
2025-07-23 07:33:51.600 +07:00 [INF] Đã áp dụng migrations cho ApplicationDbContext (Identity).
2025-07-23 07:33:51.602 +07:00 [INF] Thư mục Uploads đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Uploads
2025-07-23 07:33:51.602 +07:00 [INF] Thư mục Logs đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Logs
2025-07-23 07:33:51.680 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang khởi động.
2025-07-23 07:33:51.684 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim mới.
2025-07-23 07:34:00.297 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-23 07:34:31.254 +07:00 [INF] User logged in successfully. UserId: e5e52c1e-89dc-456e-bb10-66c62e4f9d00
2025-07-23 07:35:08.894 +07:00 [INF] User logged in successfully. UserId: e5e52c1e-89dc-456e-bb10-66c62e4f9d00
2025-07-23 07:37:15.779 +07:00 [INF] User logged out.
2025-07-23 07:37:23.855 +07:00 [INF] User logged in successfully. UserId: e5e52c1e-89dc-456e-bb10-66c62e4f9d00
2025-07-23 07:47:36.059 +07:00 [INF] Đã áp dụng migrations cho AppDbContext.
2025-07-23 07:47:36.096 +07:00 [INF] Đã áp dụng migrations cho ApplicationDbContext (Identity).
2025-07-23 07:47:36.099 +07:00 [INF] Thư mục Uploads đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Uploads
2025-07-23 07:47:36.099 +07:00 [INF] Thư mục Logs đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Logs
2025-07-23 07:47:36.257 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang khởi động.
2025-07-23 07:47:36.276 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim mới.
2025-07-23 07:47:38.629 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-23 07:53:26.259 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 07:55:00.931 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 07:55:00.949 +07:00 [INF] Đang tải file poster_3: review-phim-bo-gia-elle-man-feature-.jpeg lên /Users/tanloc/MovieWebsite/wwwroot/Uploads/poster_3_d603ad79-5693-4daf-9f53-14c237d07a99.jpeg
2025-07-23 07:55:00.952 +07:00 [INF] Đang tải file poster_doc_3: bogia_mainposter_digital_lite_1_.jpg lên /Users/tanloc/MovieWebsite/wwwroot/Uploads/poster_doc_3_70bf008c-010d-47e9-9c75-3febfddd90c0.jpg
2025-07-23 07:55:00.954 +07:00 [INF] Đang tải file poster_banner_3: review-phim-bo-gia-elle-man-feature-.jpeg lên /Users/tanloc/MovieWebsite/wwwroot/Uploads/poster_banner_3_41bac32b-f3cf-4d7d-bac8-98dbb4a64740.jpeg
2025-07-23 07:55:01.011 +07:00 [INF] Đã cập nhật phim: Bố Già (ID: 3)
2025-07-23 07:55:33.191 +07:00 [INF] Đã lấy danh sách 2 phim của quốc gia Việt Nam.
2025-07-23 07:55:46.949 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 07:55:46.966 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-23 08:02:34.150 +07:00 [INF] Đã lấy danh sách 2 phim của thể loại Chính Kịch.
2025-07-23 08:02:35.793 +07:00 [INF] Đã lấy danh sách 3 phim của thể loại Gia Đình.
2025-07-23 08:02:37.038 +07:00 [INF] Đã lấy danh sách 0 phim của thể loại Hoạt Hình.
2025-07-23 08:04:14.677 +07:00 [INF] User created a new account with password. UserId: 920e808d-567b-42cb-90e5-812f349110af
2025-07-23 08:05:23.301 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang dừng.
2025-07-23 08:23:19.408 +07:00 [INF] Đã áp dụng migrations cho AppDbContext.
2025-07-23 08:23:19.447 +07:00 [INF] Đã áp dụng migrations cho ApplicationDbContext (Identity).
2025-07-23 08:23:19.452 +07:00 [INF] Thư mục Uploads đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Uploads
2025-07-23 08:23:19.452 +07:00 [INF] Thư mục Logs đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Logs
2025-07-23 08:23:19.579 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang khởi động.
2025-07-23 08:23:29.591 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:23:32.781 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-23 08:23:39.879 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 08:23:48.934 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 08:23:49.012 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Episodes"
WHERE "Id" = @p0
RETURNING 1;
2025-07-23 08:23:49.034 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'MovieWebsite.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-23 08:23:49.035 +07:00 [ERR] Lỗi khi chỉnh sửa phim ID: 8
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MovieWebsite.Areas.Admin.Controllers.AdMoviesController.Edit(Int32 id, MovieViewModel movieVM) in /Users/tanloc/MovieWebsite/Controllers/Admin/AdMoviesController.cs:line 906
2025-07-23 08:23:49.041 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.DirectoryNotFoundException: Could not find a part of the path '/Uploads/poster_5c85cce7-40e0-40ff-8d8e-a0539bb4f7b0.jpg'.
   at System.IO.FileSystem.DeleteFile(String fullPath)
   at MovieWebsite.Areas.Admin.Controllers.AdMoviesController.Edit(Int32 id, MovieViewModel movieVM) in /Users/tanloc/MovieWebsite/Controllers/Admin/AdMoviesController.cs:line 916
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at MovieWebsite.Middleware.PageVisitCounterMiddleware.InvokeAsync(HttpContext context, AppDbContext dbContext) in /Users/tanloc/MovieWebsite/Middleware/PageVisitCounterMiddleware.cs:line 41
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-23 08:24:02.914 +07:00 [INF] Đã cập nhật phim: Chuyện Đời Bác Sĩ Nội Trú (ID: 8)
2025-07-23 08:24:21.204 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 08:24:21.229 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-23 08:24:29.584 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:25:29.582 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:26:29.591 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:27:29.611 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:27:29.616 +07:00 [INF] Công chiếu tập '6' của Phim ID 8!
2025-07-23 08:27:29.652 +07:00 [INF] Đã yêu cầu tạo thông báo trong database cho tập phim ID 35.
2025-07-23 08:27:29.725 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 08:27:29.735 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-23 08:28:29.613 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:29:29.615 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:30:29.616 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:31:29.617 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:32:29.618 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:33:29.619 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:34:29.619 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:35:29.622 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:36:29.621 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:37:29.622 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:38:29.624 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:39:29.625 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:40:29.630 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:41:29.627 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:42:29.629 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:43:29.629 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:44:29.631 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:45:29.632 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:46:29.633 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:47:29.634 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:48:29.636 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:49:29.636 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:50:29.635 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:51:29.637 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 08:51:29.658 +07:00 [INF] Công chiếu tập '7' của Phim ID 8!
2025-07-23 08:51:29.671 +07:00 [INF] Đã yêu cầu tạo thông báo trong database cho tập phim ID 36.
2025-07-23 09:03:49.708 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:04:15.971 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang dừng.
2025-07-23 09:09:47.369 +07:00 [INF] Đã áp dụng migrations cho AppDbContext.
2025-07-23 09:09:47.392 +07:00 [INF] Đã áp dụng migrations cho ApplicationDbContext (Identity).
2025-07-23 09:09:47.394 +07:00 [INF] Thư mục Uploads đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Uploads
2025-07-23 09:09:47.394 +07:00 [INF] Thư mục Logs đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Logs
2025-07-23 09:09:47.476 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang khởi động.
2025-07-23 09:09:57.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:10:06.126 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-23 09:10:06.420 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 09:10:06.524 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-23 09:10:57.479 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:11:57.479 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:12:57.480 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:13:57.482 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:14:57.482 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:15:57.482 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:16:57.484 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:17:57.484 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:18:57.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:19:57.484 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:19:57.993 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 8), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WatchPartyRooms" ("AutoStart", "CreatedAt", "CurrentEpisodeId", "InviteCode", "IsActive", "IsPrivate", "MovieId", "Name", "SelectedPosterUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2025-07-23 09:19:58.009 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'MovieWebsite.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-23 09:20:57.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:21:57.487 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:22:57.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:23:57.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:24:03.272 +07:00 [WRN] Thể loại với ID 0 không tồn tại.
2025-07-23 09:24:22.603 +07:00 [INF] Đã lấy danh sách 1 phim của thể loại Khoa Học Viễn Tưởng.
2025-07-23 09:24:30.689 +07:00 [WRN] Thể loại với ID 0 không tồn tại.
2025-07-23 09:24:40.422 +07:00 [WRN] Thể loại với ID 20 không tồn tại.
2025-07-23 09:24:57.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:25:57.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:26:57.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:27:57.490 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:28:57.489 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:29:57.492 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:30:57.490 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:31:57.491 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:32:57.492 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:33:57.490 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:34:57.495 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:35:57.493 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:36:57.494 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:37:57.496 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:38:57.495 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:39:57.496 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:40:57.497 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:41:57.498 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:42:57.499 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:43:57.499 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:44:57.499 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:45:57.501 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:46:57.501 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:47:57.502 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:48:57.502 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:49:57.503 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:50:57.503 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:51:57.504 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:52:57.506 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:53:57.506 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:54:57.507 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:55:57.508 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:56:57.508 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:57:57.508 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:58:57.511 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 09:59:57.511 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:00:57.511 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:01:57.511 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:02:57.512 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:03:57.513 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:04:57.513 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:05:57.515 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:06:57.514 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:07:57.516 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:08:57.517 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:09:57.517 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:11:52.214 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:14:05.212 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:15:05.210 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:16:05.211 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:17:05.212 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:18:05.212 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:19:05.213 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:20:05.214 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:21:05.214 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:22:05.215 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:23:05.216 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:24:05.216 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:25:05.217 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:26:05.217 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:27:05.204 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:28:05.185 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:32:05.216 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:33:08.932 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:34:08.931 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:35:08.931 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:36:08.929 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:37:08.928 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:38:08.927 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:39:08.926 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:40:08.925 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:41:08.925 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:43:18.778 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:44:18.777 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:45:18.785 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:46:18.784 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:47:18.785 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:48:18.784 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:50:15.420 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 10:50:19.883 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang dừng.
2025-07-23 11:03:17.576 +07:00 [INF] Đã áp dụng migrations cho AppDbContext.
2025-07-23 11:03:17.600 +07:00 [INF] Đã áp dụng migrations cho ApplicationDbContext (Identity).
2025-07-23 11:03:17.602 +07:00 [INF] Thư mục Uploads đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Uploads
2025-07-23 11:03:17.602 +07:00 [INF] Thư mục Logs đã được tạo hoặc xác minh tại: /Users/tanloc/MovieWebsite/wwwroot/Logs
2025-07-23 11:03:17.705 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang khởi động.
2025-07-23 11:03:27.715 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:03:58.224 +07:00 [WRN] Failed to determine the https port for redirect.
2025-07-23 11:04:00.666 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-23 11:04:00.710 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-23 11:04:07.554 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 8), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WatchPartyRooms" ("AutoStart", "CreatedAt", "CurrentEpisodeId", "InviteCode", "IsActive", "IsPrivate", "MovieId", "Name", "SelectedPosterUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2025-07-23 11:04:07.571 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'MovieWebsite.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-23 11:04:27.705 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:05:27.705 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:05:41.955 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (Size = 8), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WatchPartyRooms" ("AutoStart", "CreatedAt", "CurrentEpisodeId", "InviteCode", "IsActive", "IsPrivate", "MovieId", "Name", "SelectedPosterUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2025-07-23 11:05:41.959 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'MovieWebsite.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: WatchPartyRooms.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-23 11:06:27.704 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:07:27.704 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:08:27.703 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:09:27.703 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:10:27.702 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:11:27.703 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:12:27.715 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:13:27.750 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:17:52.456 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:19:04.586 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:21:10.362 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:22:10.363 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:23:10.363 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:24:10.364 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:25:10.363 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:29:27.543 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:30:27.542 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:35:15.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:36:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:37:15.488 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:38:15.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:39:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:40:15.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:41:15.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:42:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:43:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:44:15.488 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:45:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:46:15.485 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 11:47:15.486 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 12:32:40.756 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 12:37:18.062 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 12:47:36.871 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 12:48:36.871 +07:00 [INF] Dịch vụ đang kiểm tra các tập phim đã đến lịch chiếu.
2025-07-23 12:48:45.482 +07:00 [INF] Dịch vụ kiểm tra lịch chiếu đang dừng.
